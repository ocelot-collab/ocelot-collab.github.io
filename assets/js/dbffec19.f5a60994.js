"use strict";(self.webpackChunkocelot_website=self.webpackChunkocelot_website||[]).push([[4351],{4156:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"docu/intro","title":"Introduction","description":"Sergey Tomin (sergey.tomin@desy.de). January 2025.","source":"@site/docs/docu/intro.md","sourceDirName":"docu","slug":"/docu/intro","permalink":"/docs/docu/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/ocelot-collab/ocelot-collab.github.io/tree/main/docs/docu/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Introduction"},"sidebar":"docsSidebar","next":{"title":"OCELOT Basics","permalink":"/docs/category/ocelot-basics"}}');var s=t(4848),l=t(8453);const r={sidebar_position:1,title:"Introduction"},o="An Introduction to Ocelot",a={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Installation",id:"installation",level:2},{value:"1. Install via Anaconda Cloud",id:"1-install-via-anaconda-cloud",level:3},{value:"2. Install from GitHub (for advanced users)",id:"2-install-from-github-for-advanced-users",level:3},{value:"3. Install by Setting the Python Path",id:"3-install-by-setting-the-python-path",level:3},{value:"Importing Ocelot Modules",id:"importing-ocelot-modules",level:2},{value:"Creating a Simple Lattice",id:"creating-a-simple-lattice",level:2},{value:"Calculating Twiss Parameters",id:"calculating-twiss-parameters",level:2},{value:"Plotting Twiss Parameters",id:"plotting-twiss-parameters",level:2},{value:"Specifying Initial Twiss Parameters",id:"specifying-initial-twiss-parameters",level:2},{value:"Disclaimer:",id:"disclaimer",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("small",{children:(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["Sergey Tomin (",(0,s.jsx)(n.a,{href:"mailto:sergey.tomin@desy.de",children:"sergey.tomin@desy.de"}),"). January 2025."]})})}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"an-introduction-to-ocelot",children:"An Introduction to Ocelot"})}),"\n",(0,s.jsx)(n.p,{children:"Ocelot is a multiphysics simulation toolkit designed for studying Free Electron Lasers (FEL) and storage ring-based light sources. Implemented in Python, Ocelot caters to researchers seeking the flexibility provided by high-level languages like Matlab and Python. Its core principle revolves around scripting beam physics simulations in Python, utilizing Ocelot's modules and extensive collection of Python libraries."}),"\n",(0,s.jsxs)(n.p,{children:["Users developing high-level control applications can accelerate development by using physics models from Ocelot and Python graphics libraries such as ",(0,s.jsx)(n.a,{href:"http://pyqt.sourceforge.net/Docs/PyQt5/",children:"PyQt"})," and ",(0,s.jsx)(n.a,{href:"http://www.pyqtgraph.org/",children:"PyQtGraph"})," to create a GUI."]}),"\n",(0,s.jsx)(n.p,{children:"Developing machine learning (ML) applications for accelerators can also benefit from using Ocelot, as many popular ML frameworks are written in Python. Ocelot provides a seamless connection between physics and ML methods, making it easier to integrate physical accelerator simulators with machine learning algorithms."}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Documentation was generated automatically with the help of ChatGPT and has ",(0,s.jsx)(n.strong,{children:"not"})," yet been thoroughly reviewed or fully completed.\nThe ",(0,s.jsx)(n.strong,{children:"best"})," and most ",(0,s.jsx)(n.strong,{children:"reliable"})," way to understand ",(0,s.jsx)(n.strong,{children:"Ocelot"})," remains reading the source code and docstrings for its functions and classes.\nOver time, we will continue to improve this documentation."]})}),"\n",(0,s.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Python 3.9+"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://numpy.org/",children:(0,s.jsx)(n.code,{children:"numpy"})})," version 1.8 or higher"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://scipy.org/",children:(0,s.jsx)(n.code,{children:"scipy"})})," version 0.15 or higher"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://matplotlib.org/",children:(0,s.jsx)(n.code,{children:"matplotlib"})})," version 1.5 or higher"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.h5py.org/",children:(0,s.jsx)(n.code,{children:"h5py"})})," version 3.10 or higher"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Orbit Correction module is required"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://pandas.pydata.org/",children:(0,s.jsx)(n.code,{children:"pandas"})})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Optional"}),", but highly recommended for speeding up calculations"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://numexpr.readthedocs.io/en/latest/user_guide.html",children:(0,s.jsx)(n.code,{children:"numexpr"})})," (version 2.6.1 or higher)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://pyfftw.readthedocs.io/en/latest/",children:(0,s.jsx)(n.code,{children:"pyfftw"})})," (version 0.10 or higher)"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://numba.pydata.org/",children:(0,s.jsx)(n.code,{children:"numba"})})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.h3,{id:"1-install-via-anaconda-cloud",children:"1. Install via Anaconda Cloud"}),"\n",(0,s.jsx)(n.p,{children:"The easiest way to install OCELOT is through Anaconda Cloud. Use the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ conda install -c ocelot-collab ocelot\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-install-from-github-for-advanced-users",children:"2. Install from GitHub (for advanced users)"}),"\n",(0,s.jsx)(n.p,{children:"If you\u2019re comfortable with Git and Python, you can clone OCELOT from GitHub:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ git clone https://github.com/ocelot-collab/ocelot.git\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Alternatively, you can download the latest release as a ",(0,s.jsx)(n.a,{href:"https://github.com/ocelot-collab/ocelot/archive/refs/heads/master.zip",children:"zip file"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"To install OCELOT from source:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ python setup.py install\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-install-by-setting-the-python-path",children:"3. Install by Setting the Python Path"}),"\n",(0,s.jsx)(n.p,{children:"If you'd like to manually install OCELOT, follow these steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Download the ",(0,s.jsx)(n.a,{href:"https://github.com/ocelot-collab/ocelot/archive/master.zip",children:"ZIP file"})," from GitHub."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Unzip the file ",(0,s.jsx)(n.code,{children:"ocelot-master.zip"})," to your working directory, e.g., ",(0,s.jsx)(n.code,{children:"/your_working_dir/"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add the directory ",(0,s.jsx)(n.code,{children:"../your_working_dir/ocelot-master"})," to your ",(0,s.jsx)(n.code,{children:"PYTHONPATH"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Windows:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Control Panel"})," \u2192 ",(0,s.jsx)(n.strong,{children:"System and Security"})," \u2192 ",(0,s.jsx)(n.strong,{children:"System"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Advanced System Settings"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Environment Variables"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.strong,{children:"User variables"}),", add ",(0,s.jsx)(n.code,{children:"../your_working_dir/ocelot-master/"})," to ",(0,s.jsx)(n.code,{children:"PYTHONPATH"}),". If ",(0,s.jsx)(n.code,{children:"PYTHONPATH"})," does not exist, create it."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Variable name:"})," ",(0,s.jsx)(n.code,{children:"PYTHONPATH"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Variable value:"})," ",(0,s.jsx)(n.code,{children:"../your_working_dir/ocelot-master/"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Linux/macOS:"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ export PYTHONPATH=/your_working_dir/ocelot-master:$PYTHONPATH\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"getting-started-simplest-accelerator-structure",children:"Getting Started: Simplest Accelerator Structure"}),"\n",(0,s.jsx)(n.h2,{id:"importing-ocelot-modules",children:"Importing Ocelot Modules"}),"\n",(0,s.jsx)(n.p,{children:"The easiest way to import Ocelot is by using:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from ocelot import *\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"    initializing ocelot...\n"})}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-simple-lattice",children:"Creating a Simple Lattice"}),"\n",(0,s.jsx)(n.p,{children:"Ocelot\u2019s element syntax is similar to MAD8. Below, we create a simple lattice using quadrupoles, drift spaces,\nand a bending magnet (Bend). A beamline is simply a sequence of elements arranged in the correct order:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'d = Drift(l=1)\nqf = Quadrupole(l=0.3, k1=1)\nqd = Quadrupole(l=0.3, k1=-1)\nb = Bend(l=0.5, angle=0.1)\nm1 = Marker(eid="start")\nm2 = Marker(eid="stop")\n\ncell = (m1, d, qf, d, qd, d, b,  d, qd, d, qf, d, m2)\n'})}),"\n",(0,s.jsx)(n.p,{children:"The element sequence is then inserted into a MagneticLattice object, which acts as an abstraction layer between\nthe sequence and other Ocelot functions, adding useful functionalities:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'lat = MagneticLattice(cell)\nprint(f"total length {lat.totalLen}")\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"    total length 7.699999999999999\n"})}),"\n",(0,s.jsx)(n.h2,{id:"calculating-twiss-parameters",children:"Calculating Twiss Parameters"}),"\n",(0,s.jsx)(n.p,{children:"Twiss parameters can be calculated using the twiss() function. If initial Twiss parameters are not provided,\nthe function will attempt to find a periodic solution:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"tws = twiss(lat)\n"})}),"\n",(0,s.jsx)(n.p,{children:"The twiss function returns a list of Twiss objects, each containing various beam parameters.\nTo display key parameters of the first Twiss object:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"print(tws[0])\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"    emit_x  = 0.0\n    emit_y  = 0.0\n    beta_x  = 9.449063560593697\n    beta_y  = 3.6255987161054097\n    alpha_x = -1.4029614496300944e-16\n    alpha_y = -2.4207554851521635e-16\n    gamma_x = 0.10583059300927898\n    gamma_y = 0.27581651426504045\n    Dx      = 0.4431890150023444\n    Dy      = 0.0\n    Dxp     = 4.152686605616285e-17\n    Dyp     = 0.0\n    mux     = 0.0\n    muy     = 0.0\n    nu_x    = 0.0\n    nu_y    = 0.0\n    E       = 0.0\n    s        = 0.0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"plotting-twiss-parameters",children:"Plotting Twiss Parameters"}),"\n",(0,s.jsx)(n.p,{children:"Twiss parameters can be plotted using matplotlib or Ocelot a built-in function. It requires to import the graphical module separately."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"This separation was implemented to decouple graphical libraries from calculations, which was necessary due to limitations in older computing clusters."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from ocelot.gui import *\nplot_opt_func(lat, tws)\nplt.show()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"png",src:t(1183).A+"",width:"623",height:"487"})}),"\n",(0,s.jsx)(n.h2,{id:"specifying-initial-twiss-parameters",children:"Specifying Initial Twiss Parameters"}),"\n",(0,s.jsx)(n.p,{children:"If known, initial Twiss parameters can be passed as an argument tws0:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"tws0 = Twiss(beta_x = 10, beta_y=5, Dx=0.1)\ntws = twiss(lat, tws0=tws0)\n\nplot_opt_func(lat, tws)\nplt.show()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"png",src:t(3261).A+"",width:"633",height:"487"})}),"\n",(0,s.jsxs)(n.p,{children:["More examples can be found in ",(0,s.jsx)(n.a,{href:"/docs/tutorial/intro",children:"Tutorials"})]}),"\n",(0,s.jsx)(n.h2,{id:"disclaimer",children:"Disclaimer:"}),"\n",(0,s.jsx)(n.p,{children:"The OCELOT code comes with absolutely NO warranty. The authors of the OCELOT do not take any responsibility\nfor any damage to equipments or personnel injury that may result from the use of the code."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1183:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/simplest-ocelot_12_0-ba143d9cabd97c8fbc7691bb56c20835.png"},3261:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/simplest-ocelot_14_0-7e8e18a85b3825d7f83862c41dba338b.png"},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(6540);const s={},l=i.createContext(s);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);