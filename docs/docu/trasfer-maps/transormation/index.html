<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docu/trasfer-maps/transormation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Transformation Parent Class | OCELOT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ocelot-collab.com/docs/docu/trasfer-maps/transormation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Transformation Parent Class | OCELOT"><meta data-rh="true" name="description" content="Parent class"><meta data-rh="true" property="og:description" content="Parent class"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ocelot-collab.com/docs/docu/trasfer-maps/transormation"><link data-rh="true" rel="alternate" href="https://ocelot-collab.com/docs/docu/trasfer-maps/transormation" hreflang="en"><link data-rh="true" rel="alternate" href="https://ocelot-collab.com/docs/docu/trasfer-maps/transormation" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://A7SK3UKMX4-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="OCELOT" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.0b89c045.css">
<script src="/assets/js/runtime~main.c414cd83.js" defer="defer"></script>
<script src="/assets/js/main.17b5edfb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OCELOT</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/docu/intro">Documentation</a><a class="navbar__item navbar__link" href="/docs/tutorial/intro">Tutorials</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ocelot-collab/ocelot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docu/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/ocelot-basics">OCELOT Basics</a><button aria-label="Expand sidebar category &#x27;OCELOT Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/elements">Elements</a><button aria-label="Expand sidebar category &#x27;Elements&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/transfer-maps">Transfer Maps</a><button aria-label="Collapse sidebar category &#x27;Transfer Maps&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/docu/trasfer-maps/transormation">Transformation Parent Class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docu/trasfer-maps/first-order">First Order Map</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docu/trasfer-maps/second-order">Second Order Map</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/physics-processes">Physics Processes</a><button aria-label="Expand sidebar category &#x27;Physics Processes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/useful-functions">Useful Functions</a><button aria-label="Expand sidebar category &#x27;Useful Functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/how-to">How To</a><button aria-label="Expand sidebar category &#x27;How To&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/transfer-maps"><span itemprop="name">Transfer Maps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Transformation Parent Class</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><a href="https://github.com/ocelot-collab/ocelot/blob/master/ocelot/cpbd/transformations/transformation.py#L22" target="_blank" rel="noopener noreferrer">Transformation</a> Class</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="description">Description<a href="#description" class="hash-link" aria-label="Direct link to Description" title="Direct link to Description">​</a></h2>
<p>The <code>Transformation</code> class is an abstract base class (ABC) that defines a common interface and base functionality
for all transformations in a beamline simulation. Each transformation class calculates how particles
(either in a list of <code>Particle</code> objects or a <a href="/docs/docu/OCELOT fundamentals/particle-array"><code>ParticleArray</code></a>) are transformed
when passing through an element, typically by applying a transfer map.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="constructor">Constructor<a href="#constructor" class="hash-link" aria-label="Direct link to Constructor" title="Direct link to Constructor">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="__init__self-create_tm_param_func-delta_e_func-tm_type-tmtypes-length-float-delta_length-float--none"><code>__init__(self, create_tm_param_func, delta_e_func, tm_type: TMTypes, length: float, delta_length: float = None)</code><a href="#__init__self-create_tm_param_func-delta_e_func-tm_type-tmtypes-length-float-delta_length-float--none" class="hash-link" aria-label="Direct link to __init__self-create_tm_param_func-delta_e_func-tm_type-tmtypes-length-float-delta_length-float--none" title="Direct link to __init__self-create_tm_param_func-delta_e_func-tm_type-tmtypes-length-float-delta_length-float--none">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><strong>create_tm_param_func</strong>: A callback function that creates the parameters for the transformation (e.g., transfer matrix parameters).</li>
<li><strong>delta_e_func</strong> (<code>Callable</code>, optional): A callback function for calculating the energy change ((\Delta E)) of the beam if the transformation changes the energy. By default, this is only used for main transformations (e.g., not for entrances or exits).</li>
<li><strong>tm_type</strong> (<code>TMTypes</code>): The type of transformation (e.g., <code>MAIN</code>, <code>ENTRANCE</code>, <code>EXIT</code>), which controls whether length or energy changes apply.</li>
<li><strong>length</strong> (<code>float</code>): The total length of the element, in meters, to which the transformation is applied.</li>
<li><strong>delta_length</strong> (<code>float</code>, optional): A partial length of the element for calculations if only a portion of the element is used.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="class-methods">Class Methods<a href="#class-methods" class="hash-link" aria-label="Direct link to Class Methods" title="Direct link to Class Methods">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="from_elementcls-element-element-tm_type-tmtypes--tmtypesmain-delta_l-float--none-params"><code>from_element(cls, element: Element, tm_type: TMTypes = TMTypes.MAIN, delta_l: float = None, **params)</code><a href="#from_elementcls-element-element-tm_type-tmtypes--tmtypesmain-delta_l-float--none-params" class="hash-link" aria-label="Direct link to from_elementcls-element-element-tm_type-tmtypes--tmtypesmain-delta_l-float--none-params" title="Direct link to from_elementcls-element-element-tm_type-tmtypes--tmtypesmain-delta_l-float--none-params">​</a></h4>
<p><strong>Abstract Class Method</strong><br>
<!-- -->Creates a new transformation from a <a href="/docs/docu/OCELOT fundamentals/magnet-lattice"><code>MagneticLattice</code></a> element. Elements must implement specific hooks or callbacks for different transformation types (entrance, main, exit).</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>element</strong>: The beamline element from which the transformation is derived.</li>
<li><strong>tm_type</strong> (<code>TMTypes</code>, optional): The type of transformation to create (<code>ENTRANCE</code>, <code>MAIN</code>, or <code>EXIT</code>).</li>
<li><strong>delta_l</strong> (<code>float</code>, optional): The subset length of the element to which this transformation applies.</li>
<li><strong>params</strong>: Additional parameters that may be required by specific transformations.</li>
</ul>
<p><strong>Raises:</strong></p>
<ul>
<li><strong>NotImplementedError</strong>: If the element does not implement the required callback functions.</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="createcls-main_tm_params_func-delta_e_func-length-delta_lengthnone-entrance_tm_params_funcnone-exit_tm_params_funcnone-tm_type-tmtypes--tmtypesmain-params"><code>create(cls, main_tm_params_func, delta_e_func, length, delta_length=None, entrance_tm_params_func=None, exit_tm_params_func=None, tm_type: TMTypes = TMTypes.MAIN, **params)</code><a href="#createcls-main_tm_params_func-delta_e_func-length-delta_lengthnone-entrance_tm_params_funcnone-exit_tm_params_funcnone-tm_type-tmtypes--tmtypesmain-params" class="hash-link" aria-label="Direct link to createcls-main_tm_params_func-delta_e_func-length-delta_lengthnone-entrance_tm_params_funcnone-exit_tm_params_funcnone-tm_type-tmtypes--tmtypesmain-params" title="Direct link to createcls-main_tm_params_func-delta_e_func-length-delta_lengthnone-entrance_tm_params_funcnone-exit_tm_params_funcnone-tm_type-tmtypes--tmtypesmain-params">​</a></h4>
<p><strong>Factory Method</strong><br>
<!-- -->Creates a concrete transformation using the provided parameter-generating functions and the transformation type.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>main_tm_params_func</strong>: A function to calculate the transformation parameters for the main section of an element.</li>
<li><strong>delta_e_func</strong>: A function to calculate the energy change (\Delta E) through the element (if applicable).</li>
<li><strong>length</strong> (<code>float</code>): The full length of the element.</li>
<li><strong>delta_length</strong> (<code>float</code>, optional): A partial length of the element. Defaults to <code>None</code>, in which case the full length is used.</li>
<li><strong>entrance_tm_params_func</strong> (<code>Callable</code>, optional): A function to calculate transformation parameters for the entrance section of an element.</li>
<li><strong>exit_tm_params_func</strong> (<code>Callable</code>, optional): A function to calculate transformation parameters for the exit section of an element.</li>
<li><strong>tm_type</strong> (<code>TMTypes</code>, optional): The type of the transformation (<code>MAIN</code>, <code>ENTRANCE</code>, <code>EXIT</code>). Defaults to <code>MAIN</code>.</li>
<li><strong>params</strong>: Additional arguments for the transformation.</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>An instance of a concrete transformation class (subclass of <code>Transformation</code>).</li>
</ul>
<p><strong>Raises:</strong></p>
<ul>
<li><strong>NotImplementedError</strong>: If the required entrance or exit function is not set.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="instance-methods">Instance Methods<a href="#instance-methods" class="hash-link" aria-label="Direct link to Instance Methods" title="Direct link to Instance Methods">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="get_delta_eself"><code>get_delta_e(self)</code><a href="#get_delta_eself" class="hash-link" aria-label="Direct link to get_delta_eself" title="Direct link to get_delta_eself">​</a></h4>
<p>Retrieves the energy change (\Delta E) for this transformation, using the provided <code>delta_e_func</code>, if applicable.</p>
<p><strong>Returns:</strong></p>
<ul>
<li><strong>float</strong>: The energy change (\Delta E) in GeV (or 0.0 if <code>delta_e_func</code> is not defined or if this is an entrance/exit transformation).</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="get_paramsself-energy-float"><code>get_params(self, energy: float)</code><a href="#get_paramsself-energy-float" class="hash-link" aria-label="Direct link to get_paramsself-energy-float" title="Direct link to get_paramsself-energy-float">​</a></h4>
<p>Calculates or retrieves cached parameters for the transformation at the given beam energy.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>energy</strong> (<code>float</code>): The beam energy for which the transformation parameters are calculated.</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>The parameters (data structure depends on the implementation of <code>create_tm_param_func</code>).</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="applyself-prcl_series"><code>apply(self, prcl_series)</code><a href="#applyself-prcl_series" class="hash-link" aria-label="Direct link to applyself-prcl_series" title="Direct link to applyself-prcl_series">​</a></h4>
<p>Applies the transformation to a series of particles (list of <code>Particle</code>, a <code>ParticleArray</code>, or a single <code>Particle</code>). Updates each particle’s phase-space coordinates and energy accordingly.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>prcl_series</strong>: The particle data structure to transform. Supported types:<!-- -->
<ul>
<li><code>ParticleArray</code></li>
<li><code>Particle</code></li>
<li><code>list</code> of <code>Particle</code></li>
</ul>
</li>
</ul>
<p><strong>Raises:</strong></p>
<ul>
<li><strong>Exception</strong>: If the particle data structure is unknown or unsupported.</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="map_functionself-x-npndarray-energy-float---npndarray"><code>map_function(self, X: np.ndarray, energy: float) -&gt; np.ndarray</code><a href="#map_functionself-x-npndarray-energy-float---npndarray" class="hash-link" aria-label="Direct link to map_functionself-x-npndarray-energy-float---npndarray" title="Direct link to map_functionself-x-npndarray-energy-float---npndarray">​</a></h4>
<p><strong>Abstract Method</strong><br>
<!-- -->Calculates the transformation for a given array of particle coordinates <code>X</code> at the specified energy. Must be implemented by each concrete transformation subclass.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>X</strong> (<code>np.ndarray</code>): A 2D NumPy array representing phase-space coordinates (<code>6 x n</code>).</li>
<li><strong>energy</strong> (<code>float</code>): The beam energy in GeV.</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>An updated 2D NumPy array representing the transformed coordinates.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-internal-methods">Additional Internal Methods<a href="#additional-internal-methods" class="hash-link" aria-label="Direct link to Additional Internal Methods" title="Direct link to Additional Internal Methods">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="_clean_cashed_valuesself"><code>_clean_cashed_values(self)</code><a href="#_clean_cashed_valuesself" class="hash-link" aria-label="Direct link to _clean_cashed_valuesself" title="Direct link to _clean_cashed_valuesself">​</a></h4>
<p>Clears cached values (current energy and parameters) to ensure a fresh calculation when necessary.</p>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ocelot-collab/ocelot-collab.github.io/tree/main/docs/docu/trasfer-maps/transormation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/transfer-maps"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Transfer Maps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/docu/trasfer-maps/first-order"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">First Order Map</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#description" class="table-of-contents__link toc-highlight">Description</a></li><li><a href="#constructor" class="table-of-contents__link toc-highlight">Constructor</a></li><li><a href="#class-methods" class="table-of-contents__link toc-highlight">Class Methods</a></li><li><a href="#instance-methods" class="table-of-contents__link toc-highlight">Instance Methods</a></li><li><a href="#additional-internal-methods" class="table-of-contents__link toc-highlight">Additional Internal Methods</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/intro">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/docu/intro">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ocelot-collab/ocelot" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 OCELOT, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>